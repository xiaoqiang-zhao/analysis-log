# 开发前的思考

> 日志分析的一个前置条件就是日志怎么打，按什么逻辑分文件，每行怎么定义易读又方便分析。

## 落库和日志的区别

哪些数据需要写进数据库，哪些数据计入日志？

数据库的优点在于功能强大，增删改查比较方便，自带关联查询能力。日志的优点在于操作简单，写入快速快。所以业务上需要多维度查询或修改的数据都是要存入数据库的，单纯只是记录供简单分析或排查异常的数据一般计入日志。

## 日志格式

最基本的要记录服务器接收到了那些请求。

需要可以匹配 restful 形式的请求路径，找一个库去。在 google 上试了一些关键词没找到想要的 npm 包，我想要的是给定一个规则和字符串可以返回一个解析好的对象。

express 的 router 模块，或者 koa 的 router 中间件应该用到这个功能去读读源码。

简单的分析可以使用 shell 脚本的 grep 配合正则来实现。

最后发现当前需求用不着写一个工具就可以实现了，此项目到此为止。
